{"version":3,"sources":["components/Trainer/trainerSlice.js","store.js","components/Header/Header.js","components/Header/index.js","components/Trainer/Trainer.js","components/Trainer/index.js","components/Statistics/Statistics.js","components/Statistics/index.js","components/Modal/Modal.js","components/App/App.js","components/App/index.js","index.js"],"names":["trainerSlice","createSlice","name","initialState","keysPressedAll","keysPressedWrong","keysPressedCorrect","startTime","endTime","langCorrect","reducers","keyPressed","state","keyPressedWrong","keyPressedCorrect","timeStarted","action","payload","timeEnded","setLangCorrect","actions","configureStore","reducer","trainer","trainerReducer","Header","className","href","Trainer","useState","text","setText","textLoading","setTextLoading","hasError","setHasError","states","setStates","shouldWriteState","setShouldWrite","stop","setStop","timerId","setTimerId","dispatch","useDispatch","useSelector","useEffect","fetch","then","res","json","join","replace","split","catch","handleKeyDown","e","key","length","match","Date","getTime","setInterval","prevState","window","addEventListener","removeEventListener","clearInterval","role","map","elem","idx","Statistics","timeSpent","speed","Math","round","accuracy","isNaN","Modal","$","modal","on","id","tabIndex","aria-labelledby","aria-hidden","type","data-dismiss","aria-label","App","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.dff84a69.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const trainerSlice = createSlice({\r\n    name: 'trainer',\r\n    initialState: {\r\n        keysPressedAll: 0,\r\n        keysPressedWrong: 0,\r\n        keysPressedCorrect: 0,\r\n        startTime: 0,\r\n        endTime: 0,\r\n        langCorrect: true\r\n    },\r\n    reducers: {\r\n        keyPressed: (state) => {\r\n            state.keysPressedAll += 1;\r\n        },\r\n        keyPressedWrong: (state) => {\r\n            state.keysPressedWrong += 1;\r\n        },\r\n        keyPressedCorrect: (state) => {\r\n            state.keysPressedCorrect += 1;\r\n        },\r\n        timeStarted: (state, action) => {\r\n            state.startTime = action.payload;\r\n        },\r\n        timeEnded: (state, action) => {\r\n            state.endTime = action.payload;\r\n        },\r\n        setLangCorrect: (state, action) => {\r\n            state.langCorrect = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nexport const { keyPressed, keyPressedWrong, keyPressedCorrect, timeStarted, timeEnded, setLangCorrect } = trainerSlice.actions;\r\n\r\nexport default trainerSlice.reducer;","import { configureStore } from '@reduxjs/toolkit';\r\nimport trainerReducer from \"./components/Trainer/trainerSlice\";\r\n\r\nexport default configureStore({\r\n    reducer: {\r\n        trainer: trainerReducer\r\n    }\r\n})","import './Header.css';\r\n\r\nfunction Header() {\r\n    return (\r\n        <nav className=\"header navbar navbar-expand navbar-dark bg-primary rounded\">\r\n            <div className=\"container\">\r\n                <a className=\"navbar-brand\" href=\"#\">Typing Trainer</a>\r\n                <ul className=\"navbar-nav flex-row nav-fill\">\r\n                    <li className=\"nav-item\">\r\n                        <a className=\"nav-link\" href=\"#\">Тренажёр</a>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                        <a className=\"nav-link active\" href=\"#\">Тестирование</a>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                        <a className=\"nav-link\" href=\"#\">Инфо</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Header;","import Header from \"./Header\";\r\n\r\nexport default Header;","import React, { useState, useEffect } from 'react';\r\nimport './Trainer.css';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { keyPressed, keyPressedWrong, keyPressedCorrect, timeStarted, timeEnded, setLangCorrect } from \"./trainerSlice\";\r\n\r\nfunction Trainer() {\r\n    const [text, setText] = useState('');\r\n    const [textLoading, setTextLoading] = useState(true);\r\n    const [hasError, setHasError] = useState(false);\r\n    const [states, setStates] = useState([]);\r\n    const [shouldWriteState, setShouldWrite] = useState(true);\r\n    const [stop, setStop] = useState(false);\r\n    const [timerId, setTimerId] = useState(0);\r\n\r\n    const dispatch = useDispatch();\r\n    const trainer = useSelector(state => state.trainer);\r\n\r\n    useEffect(() => {\r\n        fetch('https://baconipsum.com/api/?type=meat-and-filler&paras=1')\r\n            .then((res) => res.json())\r\n            .then((text) => {\r\n                setText(text.join('').replace(/ {2}/g, ' ').split(''));\r\n                setTextLoading(false);\r\n            })\r\n            .catch(() => {\r\n                setHasError(true);\r\n                setTextLoading(false);\r\n            });\r\n    }, []);\r\n\r\n    const handleKeyDown = (e) => {\r\n\r\n        if(e.key.length === 1) {\r\n            if(e.key.match(/[^\\u0000-\\u007f]/g)) {\r\n                dispatch(\r\n                    setLangCorrect(false)\r\n                );\r\n            }\r\n\r\n            if(trainer.keysPressedCorrect === 0) {\r\n                dispatch(\r\n                    timeStarted((new Date()).getTime())\r\n                );\r\n\r\n                setTimerId(\r\n                    setInterval(() => {\r\n                        dispatch(\r\n                            timeEnded((new Date()).getTime())\r\n                        )\r\n                    }, 500)\r\n                )\r\n            }\r\n\r\n            dispatch( keyPressed() );\r\n\r\n            if(e.key === text[trainer.keysPressedCorrect]) {\r\n                setShouldWrite(true);\r\n                setStates((prevState) => {\r\n                    if(!shouldWriteState) {\r\n                        return [ ...prevState ];\r\n                    }\r\n                    return [\r\n                        ...prevState,\r\n                        true\r\n                    ]\r\n                });\r\n                dispatch( keyPressedCorrect() );\r\n                setStop(false);\r\n            } else {\r\n                dispatch( keyPressedWrong() );\r\n                if(stop) {\r\n                    return;\r\n                }\r\n                setStates((prevState) => ([\r\n                    ...prevState,\r\n                    false\r\n                ]));\r\n                setStop(true);\r\n                setShouldWrite(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, [text, handleKeyDown]);\r\n\r\n    useEffect(() => {\r\n        if(timerId && trainer.keysPressedCorrect === text.length) {\r\n            clearInterval(timerId);\r\n        }\r\n    }, [trainer.keysPressedCorrect, timerId]);\r\n\r\n\r\n    return (\r\n        <div className=\"col symbols trainer\">\r\n            {\r\n                textLoading ? (\r\n                    <div className=\"trainer__spinner d-flex justify-content-center\">\r\n                        <div className=\"spinner-border text-secondary\" role=\"status\">\r\n                            <span className=\"sr-only\">Loading...</span>\r\n                        </div>\r\n                    </div>)\r\n                    :\r\n                    hasError\r\n                    ?\r\n                    <div className=\"trainer__error d-flex align-items-center justify-content-center\">\r\n                        <p className=\"text-center\">Error occurred. Please, re-load the page.</p>\r\n                    </div>\r\n                    :\r\n                    text.map((elem, idx) => {\r\n                        const state = states[idx];\r\n                        return (\r\n                            <span key={idx}\r\n                                  className={`${state === true ? 'symbols_passed' : state === false ?                                       'symbols_failed' : 'symbols_black'} ${trainer.keysPressedCorrect === idx &&                                      'symbols_current'}`}>\r\n                                {elem}</span>\r\n                        )\r\n                    })\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Trainer;","import Trainer from \"./Trainer\";\r\n\r\nexport default Trainer;","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport './Statistics.css';\r\n\r\nfunction Statistics() {\r\n    const trainer = useSelector(state => state.trainer);\r\n\r\n    const timeSpent = (trainer.endTime - trainer.startTime) / 60000;\r\n    const speed = Math.round(trainer.keysPressedCorrect / timeSpent);\r\n\r\n    const accuracy = Math.round(trainer.keysPressedCorrect / trainer.keysPressedAll * 100);\r\n\r\n    return (\r\n        <div className=\"statistics col-3 d-flex flex-column align-content-center text-center\">\r\n            <div className=\"statistics__metric metric\">\r\n                <p className=\"metric__text text-secondary\"><i className=\"bi bi-stopwatch text-secondary\"/> скорость</p>\r\n                <span className=\"text-primary metric__value\">{isNaN(speed) ? 0 : speed} зн/мин</span>\r\n            </div>\r\n            <div className=\"statistics__metric metric\">\r\n                <p className=\"metric__text text-secondary\"><i className=\"bi bi-record-circle text-secondary\"/> точность</p>\r\n                <span className=\"text-primary metric__value\">{isNaN(accuracy) ? 0 : accuracy}%</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Statistics;","import Statistics from \"./Statistics\";\r\n\r\nexport default Statistics;","import React, { useEffect } from 'react';\r\nimport $ from 'jquery';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport { setLangCorrect } from \"../Trainer/trainerSlice\";\r\n\r\nfunction Modal() {\r\n    const trainer = useSelector(state => state.trainer);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if(!trainer.langCorrect) {\r\n            $('#myModal').modal('show')\r\n                .on('hidden.bs.modal', () => {\r\n                dispatch(setLangCorrect(true))\r\n            });\r\n        }\r\n    }, [trainer.langCorrect]);\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"modal fade\" id=\"myModal\" tabIndex=\"-1\" role=\"dialog\"\r\n             aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\" id=\"exampleModalLongTitle\">Неверная раскладка</h5>\r\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <p>Пожалуйста, смените раскладку клавиатуры на английский.</p>\r\n                    </div>\r\n                    <div className=\"modal-footer\">\r\n                        <button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\">Продолжить</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Modal;","import React from 'react';\nimport './App.css';\nimport Header from \"../Header\";\nimport Trainer from \"../Trainer\";\nimport Statistics from \"../Statistics\";\nimport Modal from \"../Modal/Modal\";\n\nfunction App() {\n  return (\n      <>\n        <Modal />\n        <div className=\"container app\">\n          <Header />\n          <div className=\"trainer-container d-flex p-3 bg-white border border-white rounded\">\n              <Trainer />\n              <Statistics />\n          </div>\n\n        </div>\n      </>\n  );\n}\n\nexport default App;\n","import App from \"./App\";\r\n\r\nexport default App;","import 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap/dist/js/bootstrap';\nimport 'bootstrap-icons/font/bootstrap-icons.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport store from './store';\nimport { Provider } from 'react-redux';\n\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n          <App />\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}